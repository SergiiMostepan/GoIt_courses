(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,a){},QfWi:function(e,t,a){"use strict";a.r(t);a("L1EO"),a("/YXa"),a("ZXyM"),a("D/wG"),a("JBxO"),a("WoWj"),a("e+qc"),a("U00V"),a("9DLp");window.URL=window.URL||window.webkitURL;var n,o,i={massege:document.querySelector("#chat"),form:document.querySelector("#inputForm"),asyncMap:document.querySelector('[data-name="async"]'),file:document.querySelector("#file"),userNameForm:document.querySelector("#userNameForm"),chatSection:document.querySelector(".chatSection"),registrationSection:document.querySelector(".registration"),changeDataButton:document.querySelector("#changeData"),avatarImg:document.querySelector("#avatarImg")},r="",s={};function c(e){return String(e).padStart(2,"0")}navigator.geolocation.getCurrentPosition((function(e){s.lat=e.coords.latitude,s.lng=e.coords.longitude})),i.asyncMap.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7Zkwv8ZHein66BAALTpWsJAQorKjiTlw",i.asyncMap.type="text/javascript",i.asyncMap.onload=function(){o=new google.maps.Map(document.getElementById("map"),{zoom:10,center:s})};var u=new WebSocket("wss://venify.herokuapp.com/chat");u.onmessage=function(e){var t,a=e.data,n=c((t=new Date).getHours())+":"+c(t.getMinutes())+":"+c(t.getSeconds()),r=JSON.parse(a),s=r.cords,u=r.message,l=r.name,m=r.image,d=document.createElement("li");d.textContent=n+":   "+l+": "+u,i.massege.appendChild(d),function(e,t){var a=document.createElement("img");a.classList.add("img"),a.src=e,t.appendChild(a)}(m,i.massege);new google.maps.Marker({position:s,map:o})},i.file.addEventListener("change",(function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",(function(e){n=e.target.result,avatarImg.src=n}))}));i.userNameForm.addEventListener("submit",(function(e){var t;e.preventDefault(),t=e.target.elements.userName.value,r=t,e.target.elements.userName.value="",i.chatSection.classList.add("visible"),i.registrationSection.classList.add("invisible")})),i.changeDataButton.addEventListener("click",(function(e){e.preventDefault(),i.registrationSection.classList.toggle("invisible"),i.chatSection.classList.toggle("visible")})),i.form.addEventListener("submit",(function(e){var t;e.preventDefault(),t=e.target.elements.inputField.value,u.send(JSON.stringify({cords:s,message:t,name:r,image:n})),e.target.elements.inputField.value=""}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.d007a0a176a83045b2ac.js.map